<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}{% endblock %}</title>

  <!-- Evitar caché -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  >
  <!-- Choices.js (CSS) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
  >

  <style>
    /* Quitar márgenes/padding global */
    html, body {
      margin: 0; 
      padding: 0;
      box-sizing: border-box;
      background: #fff; /* Fondo blanco global */
    }
    *, *::before, *::after {
      box-sizing: inherit;
    }

    /* Barra roja universal */
    .universal-red-bar {
      background-color: #e52e2e; /* rojo */
      width: 100%;
      padding: 0.75rem 1rem;   /* Ajusta el alto deseado */
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 1rem; /* espacio entre logo e items si hubiera */
      margin: 0;
    }
    /* Logo más grande */
    .universal-red-bar img {
      height: 60px;  /* Ajusta según prefieras (más grande) */
      width: auto;
    }

    /* .container con ancho máximo */
    .container {
      max-width: 1200px;
      margin: 0 auto; 
      padding: 1rem;
    }

    /* Animación blink (si usas Quagga) */
    @keyframes blink {
      0%   { opacity: 1; }
      50%  { opacity: 0.3; }
      100% { opacity: 1; }
    }
    .scan-active {
      animation: blink 1s infinite;
    }
  </style>
</head>
<body>
  <!-- Barra Roja Universal (solo logo) -->
  <div class="universal-red-bar">
    <img src="{{ url_for('static', filename='img/optimaxlogo.png') }}" alt="OptiMax Logo">
    <!-- Sin texto adicional -->
  </div>

  <!-- Contenido principal -->
  <div class="container">
    {% block summary %}{% endblock %}
    {% block content %}{% endblock %}
  </div>

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <!-- Choices.js JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"
  ></script>
  <!-- QuaggaJS -->
  <script src="{{ url_for('static', filename='js/quagga.min.js') }}"></script>
  <!-- Script Quagga personalizado -->
  <script src="{{ url_for('static', filename='js/mi_scanner_quagga.js') }}"></script>
  <!-- Escáner físico -->
  <script src="{{ url_for('static', filename='js/barcode-scanner.js') }}"></script>

  <script>
    // Recarga si se usa BFCache
    window.addEventListener("pageshow", function(e){
      if (e.persisted) {
        window.location.reload();
      }
    });
    // Recarga si back-forward
    document.addEventListener("visibilitychange", function(){
      if (document.visibilityState === "visible") {
        const navEntries = performance.getEntriesByType("navigation");
        if (navEntries.length > 0 && navEntries[0].type === "back_forward") {
          window.location.reload();
        }
      }
    });
  </script>
</body>
</html>
